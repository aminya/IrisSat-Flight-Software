//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// UMSATS 2018-2020
//
// License:
//  Available under MIT license.
//
// Repository:
//  Github: https://github.com/UMSATS/cdh-tsat5
//
// File Description:
//  User-facing module for abstracting MRAM initialization and usage. With a chosen MRAM instance, the user can use mr2xh40 driver functions.
//
// History
// 2019-06-09 by Tamkin Rahman
// - Created.
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// INCLUDES
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
#include "mram.h"

#include "board_definitions.h"

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// DEFINITIONS AND MACROS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// VARIABLES
//-------------------------------------------------------------------------------------------------------------------------------------------------------------

// Use this list to maintain the list of MRAMs and the core/slave/ss pins used.
MRAMInstance_t mram_instances[NUM_MRAM_INSTANCES] = {
    //                    core instance,   slave instance,       ss pin
    [MRAM_INSTANCE_0] = { MRAM0_SPI_CORE,  MRAM0_SLAVE_CORE,     MRAM0_SS_PIN }
};

//-------------------------------------------------------------------------------------------------------------------------------------------------------------
// FUNCTIONS
//-------------------------------------------------------------------------------------------------------------------------------------------------------------
void init_mram()
{
    for (int ix = 0; ix < NUM_MRAM_INSTANCES; ix++)
    {
        mr2xh40_init(&mram_instances[ix]);
    }
}
